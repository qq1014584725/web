<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{user.Tid}}</title>

  {% load staticfiles %}
    <link rel="stylesheet" type="text/css"
          href="{% static '/myapp/css/teacheruser.css' %}">
    <script src="/static/myapp/js/jquery-3.3.1.min.js"></script>

    <script>
            function popupFunc(url)
            {
                window.open(url, url, "status=1, height:800, width:600, toolbar=0, resizeable=0")
            }
    </script>

<!--导航条-->
    <script>
    function applySelectedTo(link) {
     var ul = document.getElementsByTagName("ul")[0]; // get the first ul tag on the page
     var allLinks = ul.getElementsByTagName("a"); // get all the links within that ul
     for (var i=0; i<allLinks.length; i++) { // iterate through all those links
      allLinks[i].className = ""; // and assign their class names to nothing
     }
     link.className = "selected"; // finally, assign class="selected" to our chosen link
     var allDivs = document.getElementsByTagName("div");
     for (var k=0; k<allDivs.length; k++) {
      allDivs[k].className = "";
     }
     var lyricId = link.getAttribute("href").split("#")[1];
     lyricId = document.getElementById(lyricId);
     lyricId.className = "on";
    }
    </script>
<!--时间-->
    <script>
        function showTime()
        {
            var time = new Date();
            var year=time.getFullYear();
            var month=time.getMonth()+1;
        if(month<10)
        {
            month="0"+month;
        }
        var day=time.getDate();
        if(day<10)
        {
            day="0"+day;
        }
        var hour=time.getHours();
        if(hour<10)
        {
            hour="0"+hour;
        }
        var minute=time.getMinutes();
        if(minute<10)
        {
            minute="0"+minute;
        }
        var second=time.getSeconds();
        if(second<10)
        {
            second="0"+second;
        }
        var wd= time.getDay();
        switch(wd)
        {
            case 0:
            wd="星期日";
            break;
            case 1:
            wd="星期一";
            break;
            case 2:
            wd="星期二";
            break;
            case 3:
            wd="星期三";
            break;
            case 4:
            wd="星期四";
            break;
            case 5:
            wd="星期五";
            break;
            case 6:
            wd="星期六";
            break;
        }
        document.timeform.timearea.value= year+"年"+month+"月"+day+"日"+" "+wd+" "+hour+":"+ minute+":"+second;
        setTimeout("showTime()",1000);
        }
    </script>

<!--分页-->
<!--<script>-->

                <!--&lt;!&ndash;{# 上一页 #}&ndash;&gt;-->
            <!--function previous(page) {-->
                <!--page = page-1;-->
                <!--search(page);-->
            <!--}-->
            <!--&lt;!&ndash;{# 下一页 #}&ndash;&gt;-->
            <!--function next(page) {-->
                <!--page = page +1;-->
                <!--search(page);-->
            <!--}-->
            <!--&lt;!&ndash;{# 搜索，与按钮点击事件中函数的完全相同 #}&ndash;&gt;-->
            <!--function search(page) {-->
                <!--var grade = $("#id_grade").val();                 //获得form中用户输入的grade 注意这里的id_grade 与你html中的id一致-->
                <!--$.ajax({-->
                    <!--type:"POST",-->
                    <!--data: {grade:grade,page:page},-->
                    <!--url: "{% url 'myapp:comments_upload' %}", //后台处理函数的url 这里用的是static url 需要与urls.py中的name一致-->
                    <!--cache: false,-->
                    <!--dataType: "html",-->
                    <!--success:function (results) {-->
                <!--html = '<div class="container">';-->
                <!--if (results['pages']>1){-->
                    <!--if (results['page']>0){-->
                        <!--html += '<a id="previous" href="javascript:void(0)" style="background: #000000;color:#ffffff" class="btn btn-default" onmouseover="this.style.background='+"'#ffffff';this.style.color="+"'#000000'"+'" onmouseout="this.style.background='+"'#000000';this.style.color="+"'#ffffff'"+'"  onclick="previous('+results["page"]+')">上一页</a>'-->
                    <!--}-->
                    <!--else {-->
                        <!--html += '<a id="previous" href="javascript:void(0)" class="btn btn-default disabled" onclick="previous('+results["page"]+')">上一页</a>'-->
                    <!--}-->

                    <!--if (results['page']+1<results['pages']){-->
                        <!--html += '<a id="next" href="javascript:void(0)"  class="btn btn-default" onmouseover="this.style.background='+"'#000000';this.style.color="+"'#ffffff'"+'" onmouseout="this.style.background='+"'#ffffff';this.style.color="+"'#000000'"+'" onclick="next('+results["page"]+')">下一页</a></div>';-->
                     <!--}-->
                    <!--else {-->
                        <!--html += '<a id="next" href="javascript:void(0)"  class="btn btn-default disabled" onclick="next('+results["page"]+')">下一页</a></div>';-->
                     <!--}-->
                <!--}-->
                <!--$("#nav_btn").html(html);-->





                    <!--}-->
                <!--});-->
            <!--}-->
<!--</script>-->

    <!--异步刷新-->
    <script>

        $(document).ready(function(){
            $.ajaxSetup({
                 data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
            });
        $('#form1').submit(function(){
                page = 1;
                Load();

                })

<!--搜索-->
            function Load(){
                var grade = $("#id_grade").val();                 //获得form中用户输入的grade 注意这里的id_grade 与你html中的id一致

                $.ajax({
                    type:"POST",
                    data: {grade:grade,page:1},
                    url: "{% url 'myapp:comments_upload' %}", //后台处理函数的url 这里用的是static url 需要与urls.py中的name一致
                    cache: false,
                    dataType: "html",
                    success: function(data){
                        render (data)

                    },
                    error: function(){
                        alert("false");
                    }
                });

        }
        });


<!--分页-->
            <!--{# 上一页 #}-->
        function previous(page) {
            page = page-1;
            search(page);
        }
        <!--{# 下一页 #}-->
        function next(page) {
            page = page +1;
            search(page);
        }
        <!--{# 搜索，与按钮点击事件中函数的完全相同 #}-->
        function search(page) {
            var grade = $("#id_grade").val();
            $.ajax({
                type:"POST",
                data: {grade:grade,page:page},
                url: "{% url 'myapp:comments_upload' %}", //后台处理函数的url 这里用的是static url 需要与urls.py中的name一致
                cache: false,
                dataType: "html",
                success:function (data) {
                    render(data)
                }
            });
        }


<!--成功后执行渲染-->
            function render(data){
                        var json = eval('('+data+')');
                        var id = "";
                        var str = "";
                        var html = ""
                        if( json != undefined){
                            for(var i= 2; i<(json.length);i++){    //遍历data数组
                                var stem = json[i];

                                str +=  "<tr>"
                                       + "<td align='center'>"+ "<span>"+ stem[1]+"-"+ "</span>" +"</td>"
                                       + "<td align='center'>"+ "<span>"+ stem[2]+"-"+ "</span>" +"</td>"
                                       + "<td align='center'>"+ "<span>"+ stem[3]+"班-"+ "</span>" +"</td>"
                                       + "<td align='center'>"+ "<a href='javascript:void(0)' onclick='popupFunc("+ stem[0]+ "1)'>" + "查看学生专业培养评价"+ "</a>"+ "</td>"
                                       + "<td align='center'>"+ "<a href='javascript:void(0)' onclick='popupFunc("+ stem[0]+ "2)'>" + "查看学生自我评价"+ "</a>"+ "</td>"
                                       + "<td align='center'>"+ "<a href='javascript:void(0)' onclick='popupFunc("+ stem[0]+ "3)'>" + "查看学生作业情况"+ "</a>"+ "</td>"
                                       + "<td align='center'>"+ "<a href='javascript:void(0)' onclick='popupFunc("+ stem[0]+ "4)'>" + "查看学生论文情况"+ "</a>"+ "</td>"
                                       + "<td align='center'>"+ "<a href='javascript:void(0)' onclick='popupFunc("+ stem[0]+ "5)'>" + "教师评分"+ "</a>"+ "</td>"
                                       + "</tr>";
                             $("#ul1").html(str); //在html页面id=ul1的标签里显示str内容

                            };


                            <!--{# 上一页，下一页 #}-->
                                if (json[0]>1){
                                    html += '<a id="previous" href="javascript:void(0)" style="position:relative;top:140px;left:400px;weight:500px;height:30px" class="btn btn-default"   onclick="previous('+ json[0] + ')">上一页</a>'
                                }
                                else {
                                    html += '<a id="previous" href="javascript:void(0)" style="position:relative;top:140px;left:400px;weight:500px;height:30px" class="btn btn-default disabled">上一页</a>'
                                }

                                if (json[1]){
                                    html += '<a id="next" href="javascript:void(0)"  class="btn btn-default"  style="position:relative;top:140px;left:450px;weight:500px;height:30px" onclick="next(' + json[0] + ')">下一页</a></div>';
                                 }
                                else {
                                    html += '<a id="next" href="javascript:void(0)" style="position:relative;top:140px;left:450px;weight:500px;height:30px"   class="btn btn-default disabled">下一页</a></div>';
                                 }
                            $("#nav_btn").html(html);


                        };
            }



</script>

</head>
{{AllUser}}

<body onLoad="showTime()" class="body">
            <div ><img src="/static/myapp/img/4.png" width="100%" height="250px"></div>

            <div style="position: absolute;top:16px;"><img src="/static/myapp/img/10.png" align="absmiddle" ></div>

        <form name="timeform" method="POST" action="">
            <table width="10px" style="position:absolute;top:24px;left:305px;">
                <tr>
                    <td colspan="2">
                    <input name="timearea" type="text" size="30" align="middle" style="background-color:rgb(123,205,254);border:none;font-size:14px;" readonly="readonly"></td>
                </tr>
            </table>
        </form>


                <a href="{% url 'myapp:logoutt' %}"  class="menu_head">注销</a>
            <!--<div ><img src="/static/myapp/img/4.png" width="100%" height="250px"></div>-->

            <a class="wc">欢迎您: {{user.Tname}}老师</a>



            <!--导航栏-->
<ul class="nav">
 <!--<li><a onclick="applySelectedTo(this);return false;" href="#heartbreakHotel" class="selected">主页</a></li>-->
  <li><a onclick="applySelectedTo(this);return false;" href="#Tev" class="selected">教师评价</a></li>
  <li><a onclick="applySelectedTo(this);return false;" href="#Stu" >学生名单</a></li>
  <li><a onclick="applySelectedTo(this);return false;" href="#CaseAnalysis">案例分析</a></li>
  <li><a onclick="applySelectedTo(this);return false;" href="#test">测试栏</a> </li>
</ul>
<div  id="content">
 <!--<div class="on" id="heartbreakHotel">-->
                                <!--<p style="position:absolute;top:250px;left:28%;heoght:50%"><img src="/static/myapp/img/8.jpg" ></p>-->

 <!--</div>-->

 <div id="Stu" >

        <form method="post" id="form1" name="form1" onsubmit="return false">
            {% csrf_token %}

            <table class="submit">
                <tr>
                    <td><h4>输入查询班级</h4></td>
                    <td><input type="text"  name="grade" id="id_grade"></td>
                    <td><input type="submit" value="查询" onclick="" id="submit"></td>
                </tr>
            </table>
        </form>

     <table id="ul1"  style="position:relative;top:100px;left:500px;weight:500px;height:30px"></table>

     <nav class="navbar navbar-default navbar-fixed-bottom" id="nav_btn" style="position:absolute;left:400px;right: 58px;margin: 0;padding: 0"></nav>

 </div>

    <div class="on" id="Tev"  style=";text-align:center;position:fixer;top:80px;">
        <p><a href="javascript:void(0);" onclick="popupFunc({{User.id}}6)" >教师评价综合指标</a></p>
         <!--导航条显示计算好的表格和综合评价指标-->
                 <table style="margin:0px auto" border="1" width="60%" bgcolor="#e9faff" cellpadding="8" align="center">
                    <tbody>
                            <tr align="center">
                                <td>能力指标</td>
                                <td>原始值</td>
                                <td>标准化值</td>
                                <td>判别</td>
                            </tr>
                    </tbody>
                    <tbody>
                        {% for i,j,k,l in jieguo %}
                            <tr align="center">
                                <td>{{i.targetname}}</td>
                                <td>{{j}}</td>
                                <td>{{k}}</td>
                                <td>{{l}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

            #可信度
            <h1>{{Accurcy}}</h1>

    </div>

    <div id ="CaseAnalysis" >

    </div>

    <div id="test">

    </div>

</div>

</body>

</html>